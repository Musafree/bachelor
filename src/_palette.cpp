#include "_palette.h"

#include <gsl/span>

namespace lhecker_bachelor::palette {

// The following palette colors stem from:
//   https://github.com/google/palette.js
//
// Licensed under:
//   Colour Palette Generator script.
//   Copyright (c) 2014 Google Inc.
//
//   Licensed under the Apache License, Version 2.0 (the "License");
//   you may not use this file except in compliance with the License.
//   You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
//   Unless required by applicable law or agreed to in writing, software
//   distributed under the License is distributed on an "AS IS" BASIS,
//   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//   See the License for the specific language governing permissions and
//   limitations under the License.
static std::array<std::array<uint8_t, 3>, 65> mpn65{{
    {0x29, 0x00, 0xff},
    {0xb8, 0x7e, 0x37},
    {0x1e, 0xa6, 0x66},
    {0xa3, 0x4e, 0x98},
    {0xd5, 0xd2, 0x00},
    {0x00, 0x7f, 0xff},
    {0x00, 0x8d, 0xaf},
    {0xcd, 0x80, 0x7f},
    {0x00, 0xe9, 0xb3},
    {0x60, 0x2e, 0xc4},
    {0x28, 0x56, 0xa6},
    {0xbf, 0x81, 0xf7},
    {0xc7, 0xd3, 0x8d},
    {0xda, 0xba, 0xbe},
    {0x72, 0x80, 0xfb},
    {0xd3, 0xb1, 0x80},
    {0x62, 0xb4, 0xfd},
    {0xe5, 0xcd, 0xfc},
    {0xbd, 0x80, 0xbc},
    {0x6f, 0xed, 0xff},
    {0xff, 0xea, 0xc4},
    {0x00, 0x8c, 0xcf},
    {0x77, 0x9e, 0x1b},
    {0x02, 0x5f, 0xd9},
    {0x8a, 0x29, 0xe7},
    {0x02, 0xab, 0xe6},
    {0x1d, 0x76, 0xa6},
    {0xff, 0x97, 0x00},
    {0x67, 0xd0, 0x00},
    {0x00, 0x00, 0x00},
    {0x25, 0x25, 0x25},
    {0x52, 0x52, 0x52},
    {0x73, 0x73, 0x73},
    {0x96, 0x96, 0x96},
    {0xbd, 0xbd, 0xbd},
    {0x00, 0x36, 0xf4},
    {0x3b, 0xa9, 0x4b},
    {0xbb, 0x79, 0x57},
    {0xcc, 0x7a, 0x92},
    {0x3f, 0xee, 0x97},
    {0x47, 0x39, 0xbf},
    {0x00, 0x5b, 0x9f},
    {0x58, 0x87, 0xf4},
    {0xd6, 0xae, 0x8c},
    {0x4f, 0xb9, 0xf2},
    {0x6e, 0xf2, 0xef},
    {0x72, 0x38, 0xe4},
    {0x00, 0xb1, 0xd9},
    {0x00, 0x7a, 0x9d},
    {0xff, 0x8c, 0x69},
    {0xd9, 0xd9, 0xd9},
    {0x7e, 0xd2, 0x00},
    {0x00, 0x68, 0xd0},
    {0x82, 0x9f, 0x00},
    {0x00, 0x92, 0xc4},
    {0xff, 0xe8, 0xcb},
    {0xdf, 0xcd, 0xfe},
    {0xb6, 0x7e, 0xc2},
    {0xce, 0xd2, 0x8c},
    {0xd9, 0xb8, 0xc4},
    {0xb0, 0x83, 0xf8},
    {0x00, 0x91, 0xa4},
    {0x00, 0x88, 0xf4},
    {0xdf, 0xd0, 0x27},
    {0x9b, 0x4a, 0xa0},
}};

// Color triplets are expected in OpenCV's BGR order.
static cv::Scalar get_scalar(const gsl::span<std::array<uint8_t, 3>> palette, int index) noexcept {
    auto hex = palette[index % palette.size()];
    return cv::Scalar(hex[0], hex[1], hex[2]);
}

cv::Scalar get_mpn65(int index) noexcept {
    return get_scalar(mpn65, index);
}

} // namespace lhecker_bachelor::palette
